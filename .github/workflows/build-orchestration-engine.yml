name: Build and Push Orchestration Engine Docker Image

on:
  push:
    branches:
      - main
    paths:
      - 'exchange/orchestration-engine-go/**'
      - '.github/workflows/build-orchestration-engine.yml'
      - '.github/workflows/reusable-go-build-publish.yml'
    tags:
      - 'orchestration-engine-v*'
      - 'v*'
  workflow_dispatch:

jobs:
  build-and-publish:
    uses: ./.github/workflows/reusable-go-build-publish.yml
    with:
      service-path: 'exchange/orchestration-engine-go'
      image-name: 'orchestration-engine'
      go-version: '1.22'
      docker-context: 'exchange/orchestration-engine-go'
      dockerfile-path: 'Dockerfile'
      service-description: 'Orchestration Engine service for coordinating data exchange workflows'
      enable-database: false
      enable-tests: false
