# Audit Service Environment Variables
# Copy this file to .env and update values as needed for your environment

# =============================================================================
# Service Configuration
# =============================================================================

# Service port (default: 3001)
PORT=3001

# Environment mode: development or production (default: production)
ENVIRONMENT=production

# Path to enum configuration YAML file (default: config/enums.yaml)
# This file defines allowed values for eventType, eventAction, actorType, and targetType
AUDIT_ENUMS_CONFIG=config/enums.yaml

# =============================================================================
# Database Configuration
# =============================================================================

# Database type: sqlite or postgres (default: sqlite)
# Set to "postgres" to use PostgreSQL instead of SQLite
DB_TYPE=sqlite

# =============================================================================
# SQLite Configuration (used when DB_TYPE=sqlite)
# =============================================================================

# Path to SQLite database file (default: ./data/audit.db)
# The directory will be created automatically if it doesn't exist
DB_PATH=./data/audit.db

# Maximum number of open database connections (default: 1 for SQLite)
# SQLite best practice: use 1 to prevent lock contention
DB_MAX_OPEN_CONNS=1

# Maximum number of idle database connections (default: 1 for SQLite)
DB_MAX_IDLE_CONNS=1

# =============================================================================
# PostgreSQL Configuration (used when DB_TYPE=postgres)
# =============================================================================

# Database host (default: localhost)
DB_HOST=localhost

# Database port (default: 5432)
DB_PORT=5432

# Database username (default: postgres)
DB_USERNAME=postgres

# Database password (required for PostgreSQL)
DB_PASSWORD=

# Database name (default: audit_db)
DB_NAME=audit_db

# SSL mode: disable, require, prefer, verify-full (default: disable for local)
DB_SSLMODE=disable

# Maximum number of open database connections (default: 25 for PostgreSQL)
DB_MAX_OPEN_CONNS=25

# Maximum number of idle database connections (default: 5 for PostgreSQL)
DB_MAX_IDLE_CONNS=5

# =============================================================================
# Connection Pool Settings (applies to both SQLite and PostgreSQL)
# =============================================================================

# Maximum amount of time a connection may be reused (default: 1h)
# Accepts formats like "1h", "30m", "15s", etc.
DB_CONN_MAX_LIFETIME=1h

# Maximum amount of time a connection may be idle before being closed (default: 15m)
# Accepts formats like "1h", "30m", "15s", etc.
DB_CONN_MAX_IDLE_TIME=15m

# =============================================================================
# CORS Configuration
# =============================================================================

# Comma-separated list of allowed CORS origins (default: http://localhost:5173)
# Examples:
#   - Single origin: CORS_ALLOWED_ORIGINS=http://localhost:5173
#   - Multiple origins: CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
#   - Allow all: CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_ORIGINS=http://localhost:5173
