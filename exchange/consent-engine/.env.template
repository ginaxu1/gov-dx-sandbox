# Consent Engine Environment Variables Template
# Copy this file to .env and update with your actual values

# =============================================================================
# Database Configuration
# =============================================================================

# Database Connection Settings (Legacy API)
CHOREO_DB_CE_HOSTNAME=localhost
CHOREO_DB_CE_PORT=5432
CHOREO_DB_CE_USERNAME=postgres
CHOREO_DB_CE_PASSWORD=password
CHOREO_DB_CE_DATABASENAME=consent_engine

# Database Connection Settings (V1 API)
# Note: Both legacy and V1 APIs can use the same database
CHOREO_OPENDIF_DATABASE_HOSTNAME=localhost
CHOREO_OPENDIF_DATABASE_PORT=5432
CHOREO_OPENDIF_DATABASE_USERNAME=postgres
CHOREO_OPENDIF_DATABASE_PASSWORD=password
CHOREO_OPENDIF_DATABASE_DATABASENAME=consent_engine

# Database SSL and general settings (shared by both APIs)
DB_SSLMODE=require

# Database Connection Pool Settings
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=1h
DB_CONN_MAX_IDLE_TIME=30m

# Database Timeout Settings
DB_QUERY_TIMEOUT=30s
DB_CONNECT_TIMEOUT=10s

# Database Retry Settings
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=1s

# =============================================================================
# Service Configuration
# =============================================================================

# Service Port
PORT=8081

# Consent Portal URL (where users will be redirected for consent)
# Used by both legacy and V1 APIs
CONSENT_PORTAL_URL=http://localhost:5173

# Consent Expiry Check Interval (how often to check for expired consents)
# Used by legacy API
CONSENT_EXPIRY_CHECK_INTERVAL=24h

# Database Migration (V1 API only)
# Set to "true" to run GORM auto-migration on startup
RUN_MIGRATION=false

# =============================================================================
# Asgardeo JWT Configuration (Used by both Legacy and V1 APIs)
# =============================================================================

# Asgardeo Organization Name
ASGARDEO_ORG_NAME=YOUR_ORG_NAME

# Asgardeo JWT Issuer URL (auto-constructed if not provided)
# Format: https://api.asgardeo.io/t/{ORG_NAME}/oauth2/token
ASGARDEO_ISSUER=

# Asgardeo JWT Audience
ASGARDEO_AUDIENCE=YOUR_AUDIENCE

# Asgardeo JWKS URL (auto-constructed if not provided)
# Format: https://api.asgardeo.io/t/{ORG_NAME}/oauth2/jwks
ASGARDEO_JWKS_URL=

# =============================================================================
# CORS Configuration (V1 API only)
# =============================================================================

# Allowed origins for CORS (comma-separated)
# Default: http://localhost:5173
CORS_ALLOWED_ORIGINS=http://localhost:5173

# =============================================================================
# Test Database Configuration (for running tests)
# =============================================================================

# Test Database Connection Settings
TEST_DB_HOST=localhost
TEST_DB_PORT=5432
TEST_DB_USERNAME=postgres
TEST_DB_PASSWORD=password
TEST_DB_DATABASE=consent_engine_test
TEST_DB_SSLMODE=disable

# Enable PostgreSQL tests
TEST_USE_POSTGRES=true
